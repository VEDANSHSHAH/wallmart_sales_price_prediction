<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Wallmart Sales Price Prediction App</title>
    <style>
        body{
            background-color: aliceblue;
        } 
        #form_text {
            font-family: Arial, Helvetica, sans-serif;
            font-size: x-large;
            align-self: left;
        }
        .grid-container {
            display: grid;
            grid-template-columns: auto auto;
            padding: 5px;
            }
        .grid-item {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 3px;
            text-align: center;
            }
    </style>
</head>

<body>
 
    <!-- As a heading -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">ML - Projects</span>
        </div>
    </nav>

    <div class="container text-center pt-0">
        <img src="/static/image.png" class="img-fluid" alt="Responsive image" width="400">
    </div>

    <div class="container text-center pt-2">
        <h1>Wallmart Sales Price Prediction App</h1>
                    

        <form method="post" class="border border-success border-5">
        
        <div class="grid-container">
            <div class="grid-item"><label id="form_text">Store Id:</label></div> <div class="grid-item"><input type="text" name="Store"></div>
            <div class="grid-item"><label id="form_text">Is it Holiday?:</label></div> <div class="grid-item"><select class="form-select form-select-lg mb-3" name="Holiday_Flag" aria-label=".form-select-lg example">
                                                                                                        <option selected>Select Option</option>
                                                                                                        <option value="0">No</option>
                                                                                                        <option value="1">Yes</option>
                                                                                                      </select></div>
            <div class="grid-item"><label id="form_text">Weather Condition (Temprature):</label></div> <div class="grid-item"><input type="text" name="Temperature"></div>
            <div class="grid-item"><label id="form_text">Current Fuel Price:</label></div> <div class="grid-item"><input type="text" name="Fuel_Price"></div>
            <div class="grid-item"><label id="form_text">Current CPI Rate:</label></div> <div class="grid-item"><input type="text" name="CPI"></div>
            <div class="grid-item"><label id="form_text">Current Unemployment Rate:</label></div> <div class="grid-item"><input type="text" name="Unemployment"></div>
            <div class="grid-item"><label id="form_text">Model for Prediction:</label></div> <div class="grid-item"><select class="form-select form-select-lg mb-3" name="model_choice" aria-label=".form-select-lg example">
                                                                                                        <option selected>Select Model:</option>
                                                                                                        <option value="1">XGBoost</option>
                                                                                                        <option value="2">Random Forest</option>
                                                                                                        <option value="3">Linear Regression</option>
                                                                                                       </select></div>
        </div>

        <div class="container pt-3">
            <button class="btn btn-primary" onclick="send_data()">Submit</button>
        </div>
        <br>
        </form>
        <br>
        <div>
            <b><h2 id="result"></h2></b>
        </div>
    </div>
    <div class="container text-center pt-5">
        <hr>
        <h2>Project description:</h2>
        <br>
        <h3>Please enter the <b>Required Information</b> and this intelligent web application will try to predict how much <b>Calories</b> you have burnt with the help of Machine Learning Algorithms.</h3>
    </div>
    <br>

    <script>
        function form_handler(event) {
            event.preventDefault();
        }

        function send_data()
        {
            document.querySelector('form').addEventListener("submit", form_handler);

            var fd = new FormData(document.querySelector('form'));

            var xhr = new XMLHttpRequest();

            xhr.open('POST', '/predict', true);
            document.getElementById("result").innerHTML = "Please Wait | Doing Prediction!";
            xhr.onreadystatechange = function(){
                if(xhr.readyState == XMLHttpRequest.DONE){
                    document.getElementById("result").innerHTML = "Output: $"+xhr.responseText;
                }
            };

            xhr.onload = function(){};
            xhr.send(fd);
        }
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>